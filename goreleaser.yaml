version: 1

project_name: groom

builds:
  - id: groom
    binary: groom
    goos:
      - linux
    goarch:
      - amd64
      - arm64
    # Optimization flags
    ldflags:
      - -s -w
      - -X main.CurrentVersion={{.Version}}


# This section generates the .deb
# TODO: add support for apk later
nfpms:
  - id: groom-host-pkg
    package_name: groom
    vendor: "Eric Atienza"
    homepage: "https://github.com/etnz/groom"
    maintainer: "Eric <eric@tnz.fr>"
    description: "Groom Service Agent"
    license: "BSD"
    formats:
      - deb
      - apk

# Publish settings
release:
  github:
    owner: etnz
    name: groom
  draft: false
  prerelease: auto # If tag contains 'rc', marks as prerelease